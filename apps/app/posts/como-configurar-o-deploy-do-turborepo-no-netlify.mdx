---
title: 'Como configurar o deploy do Turborepo no Netlify'
publishedTime: '2022-06-21T15:14:48Z'
modifiedTime: '2022-10-25T23:50:06Z'
description: 'Um dia desses passei por uma dificuldade que foi fazer o deploy de uma aplica√ß√£o minha utilizando Turborepo com Next.js e como acredito que mais pessoas possam ter esse problema, resolvi fazer um guia de como fazer as configura√ß√µes iniciais, bora l√°?'
image:
  { src: '/static/images/como-configurar-o-deploy-do-turborepo-no-netlify.png' }
tags: ['turborepo', 'netlify', 'tutorial', 'thayto']
href: '/blog/como-configurar-o-deploy-do-turborepo-no-netlify'
reactionsLength: 0
commentsLength: 0
---

Um dia desses passei por uma dificuldade que foi fazer o deploy de uma aplica√ß√£o minha utilizando Turborepo com Next.js e como acredito que mais pessoas possam ter esse problema, resolvi fazer um guia de como fazer as configura√ß√µes iniciais, bora l√°?

## Setup / Configura√ß√µes iniciais

Bom primeiro vamos come√ßar com o b√°sico mesmo, criar uma aplica√ß√£o utilizando o Turborepo, que √© bem simples, basta voc√™ executar esse comando abaixo no terminal :)

```bash
npx create-turbo@latest
```

E a√≠ provavelmente vai aparecer algo do tipo:

```bash
Need to install the following packages:
  create-turbo@1.2.16
Ok to proceed? (y)
```

Basta voc√™ apertar `enter ‚èé` ou `y` que ele vai baixar essa depend√™ncia pra voc√™ poder criar o projeto de uma forma bem mais simples. Logo ap√≥s vai algo parecido com isso:

```bash
>>> TURBOREPO

>>> Welcome to Turborepo! Let's get you set up with a new codebase.

? Where would you like to create your turborepo? (./my-turborepo)
```

E nesse caso eu apertei `enter ‚èé` pra ele usar esse nome padr√£o mesmo. Depois ele vai pedir pra voc√™ utilizar o package manager de sua prefer√™ncia:

```bash
? Which package manager do you want to use? (Use arrow keys)
‚ùØ npm
  pnpm
  yarn
```

Eu escolhi o `npm` mesmo pra facilitar a vida de voc√™s :D

Ap√≥s tudo isso provavelmente na tela de voc√™s vai ter algo assim:

```bash
>>> TURBOREPO

>>> Welcome to Turborepo! Let's get you set up with a new codebase.

? Where would you like to create your turborepo? ./my-turborepo
? Which package manager do you want to use? npm

>>> Creating a new turborepo with the following:

 - apps/web: Next.js with TypeScript
 - apps/docs: Next.js with TypeScript
 - packages/ui: Shared React component library
 - packages/eslint-config-custom: Shared configuration (ESLint)
 - packages/tsconfig: Shared TypeScript `tsconfig.json`

>   Installing dependencies...
```

E por fim vai estar tudo instalado lindamente e a gente vai poder ir pra parte que interessa. üòé.

Vamos abrir a pasta com nosso editor de c√≥digo preferido (no meu caso √© o VSCode) e quando a gente abrir a gente vai ter algo parecido com isso na estrutura de pastas:

![Imagem mostrando como deveria ficar a estrutura do projeto](https://dev-to-uploads.s3.amazonaws.com/uploads/articles/fizlxcl9y35xg8ixxxld.png)

## Criando arquivo de configura√ß√£o do Netlify

Ap√≥s verificar que est√° tudo certo, vamos criar um arquivo chamado `netlify.toml` dentro do `./apps/web`

![Imagem mostrando onde deve ficar o arquivo que criamos](https://dev-to-uploads.s3.amazonaws.com/uploads/articles/mwu7606izt80mx6u6bwx.png)

E dentro do `netlify.toml` vamos colocar o seguinte c√≥digo:

```toml
[build]
  command = "cd ../.. && npm install && npm run build"
  publish = ".next"

[[plugins]]
  package = "@netlify/plugin-nextjs"
```

T√°, mas pra que isso?

Bom, isso √© basicamente o arquivo de configura√ß√£o que o Netlify olha antes de fazer o deployment.

O `[build]` √© a etapa que o Netlify olha para saber como vai fazer o build

O `[[plugins]]` √© a etapa que antes de fazer o build ele instala alguns plugins que v√£o facilitar o deployment internamente. No nosso caso √© de extrema import√¢ncia adicionar o plugin do `Next.js` para n√£o termos nenhuma complica√ß√£o na hora dele criar o cache interno e utilizar o `SSR` e `Edge Functions` do Next.

Ap√≥s isso configurado a gente vai fazer um commit no nosso repo para que a gente possa subir em um repo no GitHub e fazer o deploy em si. Nesse commit abaixo reparem que estou utilizando uma conven√ß√£o famosa para commits que √© o [conventional commits](https://www.conventionalcommits.org/en/v1.0.0/#specification) coloquem um coment√°rio caso queiram que eu traga algo relacionado a padr√µes de commit :)

```bash
git add .
git commit -m "build(web): adding Netlify configuration file"
```

J√° feito o commit agora precisamos criar um repo no GitHub para settarmos o remote e podermos dar push

![Imagem mostrando cria√ß√£o do repo no GitHub](https://dev-to-uploads.s3.amazonaws.com/uploads/articles/wyz9ih56t7zhxdobuse6.png)

Aqui eu criei o repo com o nome `netlify-turborepo-post` mas voc√™s podem dar o nome que preferirem.

Ap√≥s isso vai abrir a tela do GitHub mostrando algo tipo assim

![Imagem mostrando o estado inicial do repo vazio no GitHub](https://dev-to-uploads.s3.amazonaws.com/uploads/articles/pf8qj76l9l08kxj7s3s9.png)

Voc√™s v√£o copiar a parte de baixo j√° que j√° temos um repo existente

![Imagem mostrando o segundo quadrado do GitHub que devemos copiar](https://dev-to-uploads.s3.amazonaws.com/uploads/articles/vonm2u0moerjgcg1uy29.png)

E depois voc√™s v√£o colar no terminal do nosso projeto, rodar os comandos e voil√° ‚ú®, temos agora o nosso c√≥digo dentro do GitHub

![Imagem mostrando nosso c√≥digo dentro do GitHub](https://dev-to-uploads.s3.amazonaws.com/uploads/articles/fjyt2bbhy5f97wxg50s8.png)

Bom... depois de ter criado e subido nosso c√≥digo no GitHub, agora podemos ir pro Netlify fazer a √∫ltima etapa üòÅ!

## Deployando site no Netlify

Abram a conta de voc√™s no Netlify, depois clickem no `Add new site`

![Imagem mostrando uma seta apontando para o bot√£o Add new site](https://dev-to-uploads.s3.amazonaws.com/uploads/articles/xfpndqa3d619fh8wsmbs.png)

Selecionem a op√ß√£o `Import an existent project`

![Imagem mostrando selecionando a op√ß√£o Import an existent project](https://dev-to-uploads.s3.amazonaws.com/uploads/articles/02ryw39x9gvq2oqpvvgw.png)

Selecionem o provider do GitHub

![Imagem mostrando uma seta apontando para o √≠cone do GitHub que √© o provider que devemos selecionar](https://dev-to-uploads.s3.amazonaws.com/uploads/articles/ygc2oh8gwrr7teau4zas.png)

Pesquisem o nome que deram ao projeto de voc√™s

![Image mostrando a pesquisa para o nosso repo](https://dev-to-uploads.s3.amazonaws.com/uploads/articles/sn5y68ln56sni8phfijj.png)

Depois coloquem essas configura√ß√µes no **Basic build settings**

![Imagem mostrando que devemos colocar o base directory como apps/web, deixar o build command vazio e colocar o publish directory como apps/web/
.next](https://dev-to-uploads.s3.amazonaws.com/uploads/articles/72w3i8z16opeu4tt3mgr.png)

A√≠ √© s√≥ clicar em deploy e aguardar üòé...

Ap√≥s alguns minutos o site de voc√™s j√° vai estar deployado no Netlify lindamente üòÅüéÜ.

Por√©m ele vai ter essa cara feia aqui, masssssss... a√≠ pra alterar isso √© por conta de voc√™s!

![Imagem mostrando como ficou o site](https://dev-to-uploads.s3.amazonaws.com/uploads/articles/4sl83phei0mqe45rywhu.png)

Link do deploy: https://thayto-netlify-turborepo-post.netlify.app/

Link do reposit√≥rio no GitHub: https://github.com/rafa-thayto/netlify-turborepo-post
